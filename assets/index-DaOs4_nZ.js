import{_ as V,u as B,o as j,a as m,ac as I,c as M,e as f,f as T,g as e,h as g,j as Y,w as o,i as s,t as b,d as H,l as E,ad as O,F as U,ae as q,q as A,s as L,p as R,v as $}from"./index-DC1_nRw7.js";import{E as G,a as J,b as K,c as Q}from"./index-BcRYV9xV.js";import{E as W,a as X}from"./index-CmZrrJ0K.js";const Z={class:"form"},ee={__name:"index",setup(te){const y=B();j(()=>{i()});const r=m({pageNum:1,pageSize:10}),h=l=>{r.pageSize=l,i()},C=l=>{r.pageNum=l,i()},d=m({out_trade_no:""}),x=()=>{i(d)},p=m({list:[],total:0}),i=(l={})=>{I({...r,...l}).then(({data:a})=>{const{list:_,total:c}=a.data;p.list=_,p.total=c})},v=l=>({已取消:"info",待支付:"warning",已完成:"success"}),k=l=>{q({id:l}).then(({data:a})=>{a.code===1e4&&i()})};return(l,a)=>{const _=M("PanelHead"),c=A,w=L,u=R,z=$,n=G,N=W,S=J,D=X,F=K,P=Q;return f(),T(U,null,[e(_,{route:g(y)},null,8,["route"]),Y("div",Z,[e(z,{inline:!0,model:d},{default:o(()=>[e(w,{prop:"out_trade_no"},{default:o(()=>[e(c,{modelValue:d.out_trade_no,"onUpdate:modelValue":a[0]||(a[0]=t=>d.out_trade_no=t),placeholder:"订单号"},null,8,["modelValue"])]),_:1}),e(w,null,{default:o(()=>[e(u,{type:"primary",onClick:x},{default:o(()=>a[2]||(a[2]=[s("查询")])),_:1})]),_:1})]),_:1},8,["model"])]),e(F,{data:p.list},{default:o(()=>[e(n,{prop:"out_trade_no",label:"订单号",width:"150",fixed:"left"}),e(n,{prop:"hospital_name",label:"就诊医院"}),e(n,{prop:"service_name",label:"陪诊服务"}),e(n,{label:"陪诊师头像"},{default:o(t=>[e(N,{style:{width:"40px",height:"40px"},src:t.row.companion.avatar},null,8,["src"])]),_:1}),e(n,{label:"陪诊师手机号",width:"120"},{default:o(t=>[s(b(t.row.companion.mobile),1)]),_:1}),e(n,{prop:"price",label:"总价"}),e(n,{prop:"paidPrice",label:"已付"}),e(n,{label:"下单时间",width:"120"},{default:o(t=>[s(b(g(H)(t.row.order_start_time).format("YYYY-MM-DD")),1)]),_:1}),e(n,{label:"订单状态"},{default:o(t=>[e(S,{type:v(t.row.trade_state)},{default:o(()=>[s(b(t.row.trade_state===void 0?"已完成":t.row.trade_state),1)]),_:2},1032,["type"])]),_:1}),e(n,{prop:"service_state",label:"接单状态"}),e(n,{prop:"tel",label:"联系人手机号",width:"120"}),e(n,{label:"操作",width:"100",fixed:"right"},{default:o(t=>[t.row.trade_state==="待服务"?(f(),E(D,{key:0,"confirm-button-text":"是","cancel-button-text":"否",icon:g(O),"icon-color":"#626AEF",title:"是否确认完成",onConfirm:ae=>k(t.row.out_trade_no),onCancel:l.cancelEvent},{reference:o(()=>[e(u,{type:"primary",link:""},{default:o(()=>a[3]||(a[3]=[s("服务完成")])),_:1})]),_:2},1032,["icon","onConfirm","onCancel"])):(f(),E(u,{key:1,type:"primary",link:"",disabled:""},{default:o(()=>a[4]||(a[4]=[s("暂无服务")])),_:1}))]),_:1})]),_:1},8,["data"]),e(P,{"current-page":r.pageNum,"onUpdate:currentPage":a[1]||(a[1]=t=>r.pageNum=t),"page-size":r.pageSize,background:!1,size:"small",layout:"total, prev, pager, next",total:p.total,onSizeChange:h,onCurrentChange:C},null,8,["current-page","page-size","total"])],64)}}},re=V(ee,[["__scopeId","data-v-dac3b7dd"]]);export{re as default};
