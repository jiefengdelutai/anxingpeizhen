import{aQ as P,b8 as xe,af as ye,aV as q,b9 as ze,ai as pe,B as X,ba as Te,bb as Oe,bc as $e,a4 as be,C as he,a_ as Re,r as _,bd as Ae,$ as Pe,a5 as y,N as ve,O as Le,o as Be,e as k,l as V,w as h,g as d,b4 as Me,j as w,T as f,h as e,W as me,U as Ve,V as T,E as N,be as Ye,f as x,F as re,bf as Xe,bg as De,bh as Fe,bi as He,S as Ne,bj as je,bk as We,k as Ke,Q as Ze,R as qe,H as Y,b7 as Ue,A as we,a1 as M,a2 as A,bl as Qe,a7 as ke,bm as Ge,bn as Je,bo as et,t as le,b6 as ge,bp as tt,Z as nt,bq as at,br as Ie,a3 as ot,bs as st,bt as Ee,aP as lt,i as de,p as Se,bu as rt}from"./index-DC1_nRw7.js";import{h as it,i as ct}from"./index-BcRYV9xV.js";const ut=(l,p)=>{if(!P||!l||!p)return!1;const o=l.getBoundingClientRect();let c;return p instanceof Element?c=p.getBoundingClientRect():c={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},o.top<c.bottom&&o.bottom>c.top&&o.right>c.left&&o.left<c.right};var dt="Expected a function";function fe(l,p,o){var c=!0,s=!0;if(typeof l!="function")throw new TypeError(dt);return xe(o)&&(c="leading"in o?!!o.leading:c,s="trailing"in o?!!o.trailing:s),it(l,p,{leading:c,maxWait:p,trailing:s})}const ft=ye({urlList:{type:q(Array),default:()=>ze([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:q(String)}}),pt={close:()=>!0,switch:l=>pe(l),rotate:l=>pe(l)},vt=X({name:"ElImageViewer"}),mt=X({...vt,props:ft,emits:pt,setup(l,{expose:p,emit:o}){var c;const s=l,b={CONTAIN:{name:"contain",icon:Te(Oe)},ORIGINAL:{name:"original",icon:Te($e)}},{t:$}=be(),r=he("image-viewer"),{nextZIndex:R}=Re(),S=_(),z=_([]),I=Ae(),a=_(!0),v=_(s.initialIndex),C=Pe(b.CONTAIN),u=_({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),D=_((c=s.zIndex)!=null?c:R()),F=y(()=>{const{urlList:n}=s;return n.length<=1}),U=y(()=>v.value===0),Q=y(()=>v.value===s.urlList.length-1),H=y(()=>s.urlList[v.value]),ie=y(()=>[r.e("btn"),r.e("prev"),r.is("disabled",!s.infinite&&U.value)]),G=y(()=>[r.e("btn"),r.e("next"),r.is("disabled",!s.infinite&&Q.value)]),j=y(()=>{const{scale:n,deg:g,offsetX:i,offsetY:E,enableTransition:L}=u.value;let B=i/n,O=E/n;const Z=g*Math.PI/180,Ce=Math.cos(Z),_e=Math.sin(Z);B=B*Ce+O*_e,O=O*Ce-i/n*_e;const ue={transform:`scale(${n}) rotate(${g}deg) translate(${B}px, ${O}px)`,transition:L?"transform .3s":""};return C.value.name===b.CONTAIN.name&&(ue.maxWidth=ue.maxHeight="100%"),ue});function W(){J(),o("close")}function ce(){const n=fe(i=>{switch(i.code){case A.esc:s.closeOnPressEscape&&W();break;case A.space:oe();break;case A.left:se();break;case A.up:m("zoomIn");break;case A.right:t();break;case A.down:m("zoomOut");break}}),g=fe(i=>{const E=i.deltaY||i.deltaX;m(E<0?"zoomIn":"zoomOut",{zoomRate:s.zoomRate,enableTransition:!1})});I.run(()=>{M(document,"keydown",n),M(document,"wheel",g)})}function J(){I.stop()}function ee(){a.value=!1}function te(n){a.value=!1,n.target.alt=$("el.image.error")}function ne(n){if(a.value||n.button!==0||!S.value)return;u.value.enableTransition=!1;const{offsetX:g,offsetY:i}=u.value,E=n.pageX,L=n.pageY,B=fe(Z=>{u.value={...u.value,offsetX:g+Z.pageX-E,offsetY:i+Z.pageY-L}}),O=M(document,"mousemove",B);M(document,"mouseup",()=>{O()}),n.preventDefault()}function ae(){u.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function oe(){if(a.value)return;const n=Qe(b),g=Object.values(b),i=C.value.name,L=(g.findIndex(B=>B.name===i)+1)%n.length;C.value=b[n[L]],ae()}function K(n){const g=s.urlList.length;v.value=(n+g)%g}function se(){U.value&&!s.infinite||K(v.value-1)}function t(){Q.value&&!s.infinite||K(v.value+1)}function m(n,g={}){if(a.value)return;const{minScale:i,maxScale:E}=s,{zoomRate:L,rotateDeg:B,enableTransition:O}={zoomRate:s.zoomRate,rotateDeg:90,enableTransition:!0,...g};switch(n){case"zoomOut":u.value.scale>i&&(u.value.scale=Number.parseFloat((u.value.scale/L).toFixed(3)));break;case"zoomIn":u.value.scale<E&&(u.value.scale=Number.parseFloat((u.value.scale*L).toFixed(3)));break;case"clockwise":u.value.deg+=B,o("rotate",u.value.deg);break;case"anticlockwise":u.value.deg-=B,o("rotate",u.value.deg);break}u.value.enableTransition=O}return ve(H,()=>{Le(()=>{const n=z.value[0];n!=null&&n.complete||(a.value=!0)})}),ve(v,n=>{ae(),o("switch",n)}),Be(()=>{var n,g;ce(),(g=(n=S.value)==null?void 0:n.focus)==null||g.call(n)}),p({setActiveItem:K}),(n,g)=>(k(),V(e(Ue),{to:"body",disabled:!n.teleported},{default:h(()=>[d(Me,{name:"viewer-fade",appear:""},{default:h(()=>[w("div",{ref_key:"wrapper",ref:S,tabindex:-1,class:f(e(r).e("wrapper")),style:me({zIndex:D.value})},[w("div",{class:f(e(r).e("mask")),onClick:Ve(i=>n.hideOnClickModal&&W(),["self"])},null,10,["onClick"]),T(" CLOSE "),w("span",{class:f([e(r).e("btn"),e(r).e("close")]),onClick:W},[d(e(N),null,{default:h(()=>[d(e(Ye))]),_:1})],2),T(" ARROW "),e(F)?T("v-if",!0):(k(),x(re,{key:0},[w("span",{class:f(e(ie)),onClick:se},[d(e(N),null,{default:h(()=>[d(e(Xe))]),_:1})],2),w("span",{class:f(e(G)),onClick:t},[d(e(N),null,{default:h(()=>[d(e(De))]),_:1})],2)],64)),T(" ACTIONS "),w("div",{class:f([e(r).e("btn"),e(r).e("actions")])},[w("div",{class:f(e(r).e("actions__inner"))},[d(e(N),{onClick:i=>m("zoomOut")},{default:h(()=>[d(e(Fe))]),_:1},8,["onClick"]),d(e(N),{onClick:i=>m("zoomIn")},{default:h(()=>[d(e(He))]),_:1},8,["onClick"]),w("i",{class:f(e(r).e("actions__divider"))},null,2),d(e(N),{onClick:oe},{default:h(()=>[(k(),V(Ne(e(C).icon)))]),_:1}),w("i",{class:f(e(r).e("actions__divider"))},null,2),d(e(N),{onClick:i=>m("anticlockwise")},{default:h(()=>[d(e(je))]),_:1},8,["onClick"]),d(e(N),{onClick:i=>m("clockwise")},{default:h(()=>[d(e(We))]),_:1},8,["onClick"])],2)],2),T(" CANVAS "),w("div",{class:f(e(r).e("canvas"))},[(k(!0),x(re,null,Ke(n.urlList,(i,E)=>Ze((k(),x("img",{ref_for:!0,ref:L=>z.value[E]=L,key:i,src:i,style:me(e(j)),class:f(e(r).e("img")),crossorigin:n.crossorigin,onLoad:ee,onError:te,onMousedown:ne},null,46,["src","crossorigin"])),[[qe,E===v.value]])),128))],2),Y(n.$slots,"default")],6)]),_:3})]),_:3},8,["disabled"]))}});var gt=we(mt,[["__file","image-viewer.vue"]]);const yt=ke(gt),bt=ye({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:q([String,Object])},previewSrcList:{type:q(Array),default:()=>ze([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:q(String)}}),ht={load:l=>l instanceof Event,error:l=>l instanceof Event,switch:l=>pe(l),close:()=>!0,show:()=>!0},wt=X({name:"ElImage",inheritAttrs:!1}),kt=X({...wt,props:bt,emits:ht,setup(l,{emit:p}){const o=l;let c="";const{t:s}=be(),b=he("image"),$=Ge(),r=y(()=>Je(Object.entries($).filter(([t])=>/^(data-|on[A-Z])/i.test(t)||["id","style"].includes(t)))),R=et({excludeListeners:!0,excludeKeys:y(()=>Object.keys(r.value))}),S=_(),z=_(!1),I=_(!0),a=_(!1),v=_(),C=_(),u=P&&"loading"in HTMLImageElement.prototype;let D,F;const U=y(()=>[b.e("inner"),H.value&&b.e("preview"),I.value&&b.is("loading")]),Q=y(()=>{const{fit:t}=o;return P&&t?{objectFit:t}:{}}),H=y(()=>{const{previewSrcList:t}=o;return Array.isArray(t)&&t.length>0}),ie=y(()=>{const{previewSrcList:t,initialIndex:m}=o;let n=m;return m>t.length-1&&(n=0),n}),G=y(()=>o.loading==="eager"?!1:!u&&o.loading==="lazy"||o.lazy),j=()=>{P&&(I.value=!0,z.value=!1,S.value=o.src)};function W(t){I.value=!1,z.value=!1,p("load",t)}function ce(t){I.value=!1,z.value=!0,p("error",t)}function J(){ut(v.value,C.value)&&(j(),ne())}const ee=at(J,200,!0);async function te(){var t;if(!P)return;await Le();const{scrollContainer:m}=o;tt(m)?C.value=m:nt(m)&&m!==""?C.value=(t=document.querySelector(m))!=null?t:void 0:v.value&&(C.value=ct(v.value)),C.value&&(D=M(C,"scroll",ee),setTimeout(()=>J(),100))}function ne(){!P||!C.value||!ee||(D==null||D(),C.value=void 0)}function ae(t){if(t.ctrlKey){if(t.deltaY<0)return t.preventDefault(),!1;if(t.deltaY>0)return t.preventDefault(),!1}}function oe(){H.value&&(F=M("wheel",ae,{passive:!1}),c=document.body.style.overflow,document.body.style.overflow="hidden",a.value=!0,p("show"))}function K(){F==null||F(),document.body.style.overflow=c,a.value=!1,p("close")}function se(t){p("switch",t)}return ve(()=>o.src,()=>{G.value?(I.value=!0,z.value=!1,ne(),te()):j()}),Be(()=>{G.value?te():j()}),(t,m)=>(k(),x("div",ge({ref_key:"container",ref:v},e(r),{class:[e(b).b(),t.$attrs.class]}),[z.value?Y(t.$slots,"error",{key:0},()=>[w("div",{class:f(e(b).e("error"))},le(e(s)("el.image.error")),3)]):(k(),x(re,{key:1},[S.value!==void 0?(k(),x("img",ge({key:0},e(R),{src:S.value,loading:t.loading,style:e(Q),class:e(U),crossorigin:t.crossorigin,onClick:oe,onLoad:W,onError:ce}),null,16,["src","loading","crossorigin"])):T("v-if",!0),I.value?(k(),x("div",{key:1,class:f(e(b).e("wrapper"))},[Y(t.$slots,"placeholder",{},()=>[w("div",{class:f(e(b).e("placeholder"))},null,2)])],2)):T("v-if",!0)],64)),e(H)?(k(),x(re,{key:2},[a.value?(k(),V(e(yt),{key:0,"z-index":t.zIndex,"initial-index":e(ie),infinite:t.infinite,"zoom-rate":t.zoomRate,"min-scale":t.minScale,"max-scale":t.maxScale,"url-list":t.previewSrcList,crossorigin:t.crossorigin,"hide-on-click-modal":t.hideOnClickModal,teleported:t.previewTeleported,"close-on-press-escape":t.closeOnPressEscape,onClose:K,onSwitch:se},{default:h(()=>[t.$slots.viewer?(k(),x("div",{key:0},[Y(t.$slots,"viewer")])):T("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):T("v-if",!0)],64)):T("v-if",!0)],16))}});var Ct=we(kt,[["__file","image.vue"]]);const Bt=ke(Ct),_t=ye({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:Ie,default:"primary"},cancelButtonType:{type:String,values:Ie,default:"text"},icon:{type:ot,default:()=>st},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:Ee.teleported,persistent:Ee.persistent,width:{type:[String,Number],default:150}}),Tt={confirm:l=>l instanceof MouseEvent,cancel:l=>l instanceof MouseEvent},It=X({name:"ElPopconfirm"}),Et=X({...It,props:_t,emits:Tt,setup(l,{emit:p}){const o=l,{t:c}=be(),s=he("popconfirm"),b=_(),$=()=>{var a,v;(v=(a=b.value)==null?void 0:a.onClose)==null||v.call(a)},r=y(()=>({width:lt(o.width)})),R=a=>{p("confirm",a),$()},S=a=>{p("cancel",a),$()},z=y(()=>o.confirmButtonText||c("el.popconfirm.confirmButtonText")),I=y(()=>o.cancelButtonText||c("el.popconfirm.cancelButtonText"));return(a,v)=>(k(),V(e(rt),ge({ref_key:"tooltipRef",ref:b,trigger:"click",effect:"light"},a.$attrs,{"popper-class":`${e(s).namespace.value}-popover`,"popper-style":e(r),teleported:a.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":a.hideAfter,persistent:a.persistent}),{content:h(()=>[w("div",{class:f(e(s).b())},[w("div",{class:f(e(s).e("main"))},[!a.hideIcon&&a.icon?(k(),V(e(N),{key:0,class:f(e(s).e("icon")),style:me({color:a.iconColor})},{default:h(()=>[(k(),V(Ne(a.icon)))]),_:1},8,["class","style"])):T("v-if",!0),de(" "+le(a.title),1)],2),w("div",{class:f(e(s).e("action"))},[Y(a.$slots,"actions",{confirm:R,cancel:S},()=>[d(e(Se),{size:"small",type:a.cancelButtonType==="text"?"":a.cancelButtonType,text:a.cancelButtonType==="text",onClick:S},{default:h(()=>[de(le(e(I)),1)]),_:1},8,["type","text"]),d(e(Se),{size:"small",type:a.confirmButtonType==="text"?"":a.confirmButtonType,text:a.confirmButtonType==="text",onClick:R},{default:h(()=>[de(le(e(z)),1)]),_:1},8,["type","text"])])],2)],2)]),default:h(()=>[a.$slots.reference?Y(a.$slots,"reference",{key:0}):T("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var St=we(Et,[["__file","popconfirm.vue"]]);const Nt=ke(St);export{Bt as E,Nt as a};
